# üß™ –û—Ç—á–µ—Ç –æ –ª–æ–∫–∞–ª—å–Ω–æ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ APEX Asia Property Exchange

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚úÖ Development –æ–∫—Ä—É–∂–µ–Ω–∏–µ (docker-compose.yml)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£–°–ü–ï–®–ù–û

| –°–µ—Ä–≤–∏—Å | –ü–æ—Ä—Ç | –°—Ç–∞—Ç—É—Å | Health Check |
|--------|------|--------|--------------|
| Backend API | 8000 | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | `{"status":"healthy","environment":"development"}` |
| Frontend | 3001 | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | `{"status":"healthy","environment":"development"}` |
| Admin Panel | 8003 | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | HTTP 200 OK |
| PostgreSQL | 5432 | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | Healthy |
| Redis | 6379 | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | Healthy |

**–õ–æ–≥–∏:**
- ‚úÖ Backend: –£—Å–ø–µ—à–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î, –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
- ‚úÖ Frontend: Next.js –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3000 (–º–∞–ø–ø–∏–Ω–≥ –Ω–∞ 3001)
- ‚úÖ Admin Panel: Gunicorn –∑–∞–ø—É—â–µ–Ω —Å 3 –≤–æ—Ä–∫–µ—Ä–∞–º–∏
- ‚úÖ Database: PostgreSQL –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ
- ‚úÖ Redis: –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω —Å AOF

### ‚úÖ Staging –æ–∫—Ä—É–∂–µ–Ω–∏–µ (docker-compose.staging.yml)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£–°–ü–ï–®–ù–û

| –°–µ—Ä–≤–∏—Å | –ü–æ—Ä—Ç | –°—Ç–∞—Ç—É—Å | Health Check |
|--------|------|--------|--------------|
| Backend API | 8001 | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | `{"status":"healthy","environment":"staging"}` |
| Frontend | 3000 | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | `{"status":"healthy","environment":"staging"}` |
| Admin Panel | 8002 | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | HTTP 200 OK |
| PostgreSQL | 5433 | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | Healthy |
| Redis | 6380 | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | Healthy |

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ—Ä—Ç–æ–≤

### Development (–æ—Å–Ω–æ–≤–Ω–æ–π)
```
Backend:   localhost:8000
Frontend:  localhost:3001
Admin:     localhost:8003
Database:  localhost:5432
Redis:     localhost:6379
```

### Staging (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π)
```
Backend:   localhost:8001
Frontend:  localhost:3000
Admin:     localhost:8002
Database:  localhost:5433
Redis:     localhost:6380
```

## üöÄ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞

### Development
```bash
# –ó–∞–ø—É—Å–∫
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
docker-compose ps

# –õ–æ–≥–∏
docker-compose logs [service]

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down
```

### Staging
```bash
# –ó–∞–ø—É—Å–∫
docker-compose -f docker-compose.staging.yml up -d

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
docker-compose -f docker-compose.staging.yml ps

# –õ–æ–≥–∏
docker-compose -f docker-compose.staging.yml logs [service]

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose -f docker-compose.staging.yml down
```

## üìã –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### ‚úÖ Health Checks
- **Backend API**: `/health` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –∏ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- **Frontend**: `/api/health` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –∏ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- **Admin Panel**: `/admin/` - –¥–æ—Å—Ç—É–ø–µ–Ω Django admin

### ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Development**: `asia_crm_dev` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —Å –º–∏–≥—Ä–∞—Ü–∏—è–º–∏
- **Staging**: `asia_crm_staging` - –æ—Ç–¥–µ–ª—å–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### ‚úÖ Redis
- **Development**: –ü–æ—Ä—Ç 6379 - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å AOF
- **Staging**: –ü–æ—Ä—Ç 6380 - –æ—Ç–¥–µ–ª—å–Ω—ã–π –∏–Ω—Å—Ç–∞–Ω—Å

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–Ω—è—Ç–æ—Å—Ç–∏ –ø–æ—Ä—Ç–æ–≤
lsof -i :8000,3001,8003,5432,6379

# –ü—Ä–æ–≤–µ—Ä–∫–∞ staging –ø–æ—Ä—Ç–æ–≤
lsof -i :8001,3000,8002,5433,6380
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
```bash
# –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker ps --format "table {{.Names}}\t{{.Status}}\t{{.Ports}}"

# Health checks
docker-compose ps
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### ‚úÖ –£—Å–ø–µ—à–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:
1. **–ó–∞–ø—É—Å–∫ –æ–±–æ–∏—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π** –±–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø–æ—Ä—Ç–æ–≤
2. **Health checks** –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç
3. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
4. **–ú–∏–≥—Ä–∞—Ü–∏–∏** –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
5. **Redis** —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
6. **Frontend** –∏ **Admin Panel** –¥–æ—Å—Ç—É–ø–Ω—ã

### üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
- **Development**: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø–æ—Ä—Ç—ã –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **Staging**: –°–º–µ—â–µ–Ω–Ω—ã–µ –ø–æ—Ä—Ç—ã –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
- **–ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ volumes** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **–†–∞–∑–Ω—ã–µ —Å–µ—Ç–∏** –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:
1. **Development –æ–∫—Ä—É–∂–µ–Ω–∏–µ** –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
2. **Staging –æ–∫—Ä—É–∂–µ–Ω–∏–µ** –≥–æ—Ç–æ–≤–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
3. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** —Å–æ–∑–¥–∞–Ω–∞ –∏ –∞–∫—Ç—É–∞–ª—å–Ω–∞
4. **–ü–æ—Ä—Ç—ã** –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—Ç

### üîÑ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:
1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å** –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (AmoCRM, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)
2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å** –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
3. **–î–æ–±–∞–≤–∏—Ç—å** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã
4. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å** CI/CD –¥–ª—è staging

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ!**

–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å –Ω–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –ø–æ—Ä—Ç–æ–≤. Development –∏ staging –æ–∫—Ä—É–∂–µ–Ω–∏—è –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –±–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤.

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û –ö –ü–†–û–î–ê–ö–®–ï–ù–£
