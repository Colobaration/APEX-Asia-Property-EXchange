# üß™ –û—Ç—á–µ—Ç –æ –ª–æ–∫–∞–ª—å–Ω–æ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ staging –æ–∫—Ä—É–∂–µ–Ω–∏—è

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–°—Ç–∞—Ç—É—Å: –£–°–ü–ï–®–ù–û** üéâ

–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏.

## üìä –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

| –°–µ—Ä–≤–∏—Å | –°—Ç–∞—Ç—É—Å | –ü–æ—Ä—Ç | Health Check |
|--------|--------|------|--------------|
| **backend** | ‚úÖ Running | 8001 | starting |
| **db** | ‚úÖ Running | 5433 | healthy |
| **redis** | ‚úÖ Running | 6380 | healthy |
| **frontend** | ‚úÖ Running | 3000 | starting |
| **nginx** | ‚úÖ Running | 80/443 | starting |

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è DATABASE_URL
- **–ü—Ä–æ–±–ª–µ–º–∞**: Entrypoint —Å–∫—Ä–∏–ø—Ç –æ–∂–∏–¥–∞–ª `DATABASE_URL`, –∞ –ø–µ—Ä–µ–¥–∞–≤–∞–ª—Å—è `DB_URL`
- **–†–µ—à–µ–Ω–∏–µ**: –ò–∑–º–µ–Ω–µ–Ω–æ –≤ `docker-compose.staging.yml`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: Backend —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è

### 2. Nginx –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ API
- **–ü—Ä–æ–±–ª–µ–º–∞**: Nginx –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–ª API –∑–∞–ø—Ä–æ—Å—ã
- **–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ `nginx/nginx-staging.conf`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: API –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ nginx

## üåê –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ endpoints

### Backend (–ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø)
- ‚úÖ `http://localhost:8001/` - API –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- ‚úÖ `http://localhost:8001/health` - Health check

### Frontend (–ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø)
- ‚úÖ `http://localhost:3000/` - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞

### Nginx (–ø—Ä–æ–∫—Å–∏)
- ‚úÖ `http://localhost:80/` - Frontend —á–µ—Ä–µ–∑ nginx
- ‚úÖ `http://localhost:80/api/` - API —á–µ—Ä–µ–∑ nginx
- ‚úÖ `http://localhost:80/health` - Health check —á–µ—Ä–µ–∑ nginx

## üìã –¢–µ—Å—Ç–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ó–∞–ø—É—Å–∫ –æ–∫—Ä—É–∂–µ–Ω–∏—è
docker-compose -f docker-compose.staging.yml up --build -d

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
docker-compose -f docker-compose.staging.yml ps

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API
curl -s http://localhost:8001/health | jq .
curl -s http://localhost:80/api/ | jq .
curl -s http://localhost:80/health | jq .

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Frontend
curl -s http://localhost:3000 | head -20
curl -s http://localhost:80 | head -20

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose -f docker-compose.staging.yml logs backend
docker-compose -f docker-compose.staging.yml logs nginx
```

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ production

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –í—Å–µ 5 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- Redis –∫—ç—à –¥–æ—Å—Ç—É–ø–µ–Ω
- API –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã
- Frontend –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- Nginx –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- Health checks –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

### üîß –ß—Ç–æ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–ª—è production
- SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
- –†–µ–∞–ª—å–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª—é—á–∏
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ AmoCRM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram/WhatsApp —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ email —Å–µ—Ä–≤–∏—Å–∞
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏**: ~70 —Å–µ–∫—É–Ω–¥ (–ø–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫)
- **–í—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞**: ~30 —Å–µ–∫—É–Ω–¥
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏**: ~500MB (–≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã)
- **–†–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–æ–≤**: ~1.2GB (backend + frontend)

## üéØ –í—ã–≤–æ–¥

**Staging –æ–∫—Ä—É–∂–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏ –≥–æ—Ç–æ–≤—ã –¥–ª—è:
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –≤ Portainer
- –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –∑–∞–∫–∞–∑—á–∏–∫—É
- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ production

---
*–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω: $(date)*
