# üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ APEX

## üéØ –û–±–∑–æ—Ä

–≠—Ç–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è–º —Å–∏—Å—Ç–µ–º—ã APEX Asia Property Exchange —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
docs/integrations/
‚îú‚îÄ‚îÄ README.md                    # –≠—Ç–æ—Ç —Ñ–∞–π–ª - –æ–±–∑–æ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
‚îú‚îÄ‚îÄ amocrm-integration-guide.md  # –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ AmoCRM
‚îú‚îÄ‚îÄ amocrm-setup.md              # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ AmoCRM
‚îú‚îÄ‚îÄ webhook-quickstart.md        # –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç webhook'–æ–≤
‚îî‚îÄ‚îÄ webhook-server-setup.md      # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook —Å–µ—Ä–≤–µ—Ä–∞
```

## üìã –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è–º

### **amocrm-integration-guide.md** - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ AmoCRM
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å AmoCRM

**–°–æ–¥–µ—Ä–∂–∏—Ç:**
- ‚úÖ OAuth2 –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- ‚úÖ API endpoints –∏ –º–µ—Ç–æ–¥—ã
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ webhook'–æ–≤
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ retry –ª–æ–≥–∏–∫–∞

**–î–ª—è –∫–æ–≥–æ:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π, backend —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏

### **amocrm-setup.md** - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ AmoCRM
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ AmoCRM

**–°–æ–¥–µ—Ä–∂–∏—Ç:**
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ AmoCRM
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ OAuth2
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è webhook'–æ–≤
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

**–î–ª—è –∫–æ–≥–æ:** DevOps –∏–Ω–∂–µ–Ω–µ—Ä—ã, –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã

### **webhook-quickstart.md** - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç webhook'–æ–≤
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ë—ã—Å—Ç—Ä–æ–µ –Ω–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã —Å webhook'–∞–º–∏

**–°–æ–¥–µ—Ä–∂–∏—Ç:**
- ‚úÖ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ webhook'–æ–≤
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- ‚úÖ Troubleshooting

**–î–ª—è –∫–æ–≥–æ:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏, –Ω–∞—á–∏–Ω–∞—é—â–∏–µ —Å webhook'–æ–≤

### **webhook-server-setup.md** - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook —Å–µ—Ä–≤–µ—Ä–∞
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–¥—Ä–æ–±–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ webhook —Å–µ—Ä–≤–µ—Ä–∞

**–°–æ–¥–µ—Ä–∂–∏—Ç:**
- ‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ webhook —Å–µ—Ä–≤–µ—Ä–∞
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–î–ª—è –∫–æ–≥–æ:** DevOps –∏–Ω–∂–µ–Ω–µ—Ä—ã, backend —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏

## üîó –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### **1. AmoCRM**
- ‚úÖ OAuth2 –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- ‚úÖ REST API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ Webhook –æ–±—Ä–∞–±–æ—Ç–∫–∞
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ª–∏–¥–æ–≤ –∏ —Å–¥–µ–ª–æ–∫
- ‚úÖ –ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø–æ–ª—è

### **2. WhatsApp Business API**
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –°—Ç–∞—Ç—É—Å—ã –¥–æ—Å—Ç–∞–≤–∫–∏
- ‚úÖ –ú–µ–¥–∏–∞ —Ñ–∞–π–ª—ã

### **3. Telegram Bot API**
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- ‚úÖ –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞
- ‚úÖ Inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
- ‚úÖ Webhook —Ä–µ–∂–∏–º

### **4. Email (SMTP)**
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ email
- ‚úÖ HTML —à–∞–±–ª–æ–Ω—ã
- ‚úÖ –í–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ –ú–∞—Å—Å–æ–≤–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ AmoCRM**
```bash
# 1. –°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ AmoCRM
# 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å OAuth2
# 3. –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω—ã

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
AMOCRM_CLIENT_ID=your_client_id
AMOCRM_CLIENT_SECRET=your_client_secret
AMOCRM_DOMAIN=your_domain.amocrm.ru
AMOCRM_REDIRECT_URI=http://localhost:8000/api/auth/amo/callback
```

### **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook'–æ–≤**
```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook –¥–ª—è AmoCRM
curl -X POST http://localhost:8000/api/webhooks/amocrm/setup

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ webhook
curl -X POST http://localhost:8000/api/webhooks/amocrm/test \
  -H "Content-Type: application/json" \
  -d '{"test": "data"}'
```

### **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ WhatsApp**
```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ WhatsApp API
WHATSAPP_API_URL=https://api.whatsapp.com
WHATSAPP_API_KEY=your_api_key
WHATSAPP_PHONE_NUMBER=your_phone_number
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
```bash
# AmoCRM
AMOCRM_CLIENT_ID=your_client_id
AMOCRM_CLIENT_SECRET=your_client_secret
AMOCRM_DOMAIN=your_domain.amocrm.ru
AMOCRM_REDIRECT_URI=http://localhost:8000/api/auth/amo/callback

# WhatsApp
WHATSAPP_API_URL=https://api.whatsapp.com
WHATSAPP_API_KEY=your_api_key
WHATSAPP_PHONE_NUMBER=your_phone_number

# Telegram
TELEGRAM_BOT_TOKEN=your_bot_token
TELEGRAM_DEFAULT_CHAT_ID=your_chat_id

# Email
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_app_password
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ AmoCRM**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
curl http://localhost:8000/api/auth/amo/status

# –¢–µ—Å—Ç API
curl http://localhost:8000/api/leads/ \
  -H "Authorization: Bearer your_token"

# –¢–µ—Å—Ç webhook
curl -X POST http://localhost:8000/api/webhooks/amocrm/test
```

### **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ webhook'–æ–≤**
```bash
# –¢–µ—Å—Ç webhook —Å–µ—Ä–≤–µ—Ä–∞
curl -X POST http://localhost:8000/api/webhooks/test \
  -H "Content-Type: application/json" \
  -d '{"event": "test", "data": {"test": "value"}}'
```

### **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**
```bash
# –¢–µ—Å—Ç WhatsApp
curl -X POST http://localhost:8000/api/notifications/whatsapp/test \
  -H "Content-Type: application/json" \
  -d '{"phone": "+1234567890", "message": "Test message"}'

# –¢–µ—Å—Ç Telegram
curl -X POST http://localhost:8000/api/notifications/telegram/test \
  -H "Content-Type: application/json" \
  -d '{"chat_id": "123456789", "message": "Test message"}'
```

## üö® Troubleshooting

### **–ü—Ä–æ–±–ª–µ–º—ã —Å AmoCRM**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–æ–∫–µ–Ω—ã
curl http://localhost:8000/api/auth/amo/status

# –û–±–Ω–æ–≤–∏—Ç—å —Ç–æ–∫–µ–Ω—ã
curl -X POST http://localhost:8000/api/auth/amo/refresh

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker-compose logs backend | grep amocrm
```

### **–ü—Ä–æ–±–ª–µ–º—ã —Å webhook'–∞–º–∏**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å webhook —Å–µ—Ä–≤–µ—Ä–∞
curl http://localhost:8000/api/webhooks/status

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ webhook'–æ–≤
docker-compose logs backend | grep webhook

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
curl http://localhost:8000/api/webhooks/security/check
```

### **–ü—Ä–æ–±–ª–µ–º—ã —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å WhatsApp
curl http://localhost:8000/api/notifications/whatsapp/status

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å Telegram
curl http://localhost:8000/api/notifications/telegram/status

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
docker-compose logs backend | grep notification
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### **–ú–µ—Ç—Ä–∏–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π**
```bash
# –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
curl http://localhost:8000/api/integrations/status

# –ú–µ—Ç—Ä–∏–∫–∏ AmoCRM
curl http://localhost:8000/api/integrations/amocrm/metrics

# –ú–µ—Ç—Ä–∏–∫–∏ webhook'–æ–≤
curl http://localhost:8000/api/webhooks/metrics
```

### **–õ–æ–≥–∏**
```bash
# –õ–æ–≥–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
docker-compose logs backend | grep -E "(amocrm|webhook|notification)"

# –õ–æ–≥–∏ AmoCRM
docker-compose logs backend | grep amocrm

# –õ–æ–≥–∏ webhook'–æ–≤
docker-compose logs backend | grep webhook
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### **Webhook –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ webhook'–æ–≤
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è IP –∞–¥—Ä–µ—Å–æ–≤
- ‚úÖ Rate limiting
- ‚úÖ Idempotency keys

### **OAuth2 –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
- ‚úÖ Secure token storage
- ‚úÖ Token refresh
- ‚úÖ Scope validation
- ‚úÖ Error handling

## üîó –°–≤—è–∑–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [–ù–∞—Å—Ç—Ä–æ–π–∫–∞](../setup/README.md) - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- [CI/CD –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](../cicd/README.md) - –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](../architecture/README.md) - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](../quickstart/README.md) - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
3. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–∞—Ö
5. –°–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏

---

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã APEX –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã! üéâ**
