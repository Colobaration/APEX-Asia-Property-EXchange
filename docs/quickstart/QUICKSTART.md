# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å amoCRM

## ‚ö° –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (5 –º–∏–Ω—É—Ç)

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
git clone <repository-url>
cd APEX-Asia-Property-EXchange-
make install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
cp env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª —Å –≤–∞—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ amoCRM
```

### 3. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```bash
make start
```

### 4. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ amoCRM
```bash
make amo-auth
```

### 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
make test-integration
```

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤ amoCRM

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
1. **–°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** –≤ amoCRM
2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å OAuth2 –ø—Ä–∞–≤–∞**
3. **–°–æ–∑–¥–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–µ –ø–æ–ª—è** (—Å–º. —Ç–∞–±–ª–∏—Ü—É –Ω–∏–∂–µ)
4. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhook**

### –ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø–æ–ª—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è:

| –°—É—â–Ω–æ—Å—Ç—å | –ü–æ–ª–µ | ID | –¢–∏–ø |
|----------|------|----|-----|
| –ö–æ–Ω—Ç–∞–∫—Ç—ã | –¢–µ–ª–µ—Ñ–æ–Ω | 123456 | –¢–µ–ª–µ—Ñ–æ–Ω |
| –ö–æ–Ω—Ç–∞–∫—Ç—ã | Email | 123457 | Email |
| –°–¥–µ–ª–∫–∏ | UTM Source | 123458 | –¢–µ–∫—Å—Ç |
| –°–¥–µ–ª–∫–∏ | UTM Medium | 123459 | –¢–µ–∫—Å—Ç |
| –°–¥–µ–ª–∫–∏ | UTM Campaign | 123460 | –¢–µ–∫—Å—Ç |

## üîß –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º
make start          # –ó–∞–ø—É—Å–∫
make stop           # –û—Å—Ç–∞–Ω–æ–≤–∫–∞
make restart        # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
make logs           # –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

# –†–∞–±–æ—Ç–∞ —Å amoCRM
make amo-auth       # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
make amo-status     # –°—Ç–∞—Ç—É—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
make amo-test       # –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

# –†–∞–±–æ—Ç–∞ —Å –ª–∏–¥–∞–º–∏
make create-lead    # –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –ª–∏–¥
make get-leads      # –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ª–∏–¥–æ–≤

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
make migrate        # –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
make backup         # –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è
make restore        # –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
make test           # –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
make format         # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
make lint           # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
make test-integration
```

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
curl http://localhost:8000/api/auth/amo/status

# –°–æ–∑–¥–∞–Ω–∏–µ –ª–∏–¥–∞
curl -X POST http://localhost:8000/api/leads/ \
  -H "Content-Type: application/json" \
  -d '{"name": "–¢–µ—Å—Ç", "phone": "+79001234567"}'

# –ü–æ–ª—É—á–µ–Ω–∏–µ –ª–∏–¥–æ–≤
curl http://localhost:8000/api/leads/
```

## üö® –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### "amoCRM –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω"
```bash
make amo-auth  # –ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ –∏ –∞–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å
```

### "Database connection failed"
```bash
make migrate   # –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏
```

### "Invalid client_id"
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å Client ID –≤ .env —Ñ–∞–π–ª–µ

### "Field not found"
–°–æ–∑–¥–∞–π—Ç–µ –∫–∞—Å—Ç–æ–º–Ω—ã–µ –ø–æ–ª—è –≤ amoCRM —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ ID

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `docs/amocrm-integration-guide.md`
- **API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `http://localhost:8000/docs`
- **–õ–æ–≥–∏:** `make logs`
- **–°—Ç–∞—Ç—É—Å:** `make health`

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ email –≤–æ—Ä–æ–Ω–∫–∏**
2. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ WhatsApp API**
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞—à–±–æ—Ä–¥—ã**
4. **–ü—Ä–æ–≤–µ–¥–∏—Ç–µ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**

---

**–ì–æ—Ç–æ–≤–æ!** üéâ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç.
